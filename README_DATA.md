# データ管理ガイド

## スプレッドシートでのデータ管理

このアプリは、Googleスプレッドシートで問題データを管理できます。

## セットアップ手順

### 1. スプレッドシートの作成

Googleスプレッドシートで以下の2つのシートを作成してください：

#### 化合物データ（compounds）
| id | name | type | formula | atoms | bonds |
|----|------|------|---------|-------|-------|
| 1 | メタン | アルカン | CH4 | | |

#### 反応データ（reactions）
| type | from | reagent | to | description |
|------|------|---------|----|-------------|
| substitution | メタン | 水素→塩素 | クロロメタン | メタンに水素を塩素で置換すると何になる？ |
| synthesis | メタン | 塩素 | クロロメタン | メタンに塩素を反応させると何になる？ |

### 2. CSVファイルのエクスポート

1. スプレッドシートで「ファイル」→「ダウンロード」→「CSV（.csv、現在のシート）」
2. 化合物データを `compounds.csv` として保存
3. 反応データを `reactions.csv` として保存

### 3. ファイルの配置

エクスポートしたCSVファイルを以下の場所に配置：
- `public/data/compounds.csv`
- `public/data/reactions.csv`

### 4. アプリの再起動

開発サーバーを再起動すると、新しいデータが読み込まれます。

## データ形式の詳細

### 化合物データ（compounds.csv）

**必須列:**
- `id`: 化合物の一意のID（数値）
- `name`: 化合物の名称（日本語）
- `type`: 化合物の種類
- `formula`: 化学式

**オプション列:**
- `atoms`: 原子データ（JSON形式）
- `bonds`: 結合データ（JSON形式）

**注意:** `atoms`と`bonds`が空の場合は、既存の化合物データから自動的に構造式が取得されます。新しい化合物を追加する場合は、構造式データも必要です。

### 反応データ（reactions.csv）

**必須列:**
- `type`: 反応の種類（`substitution` または `synthesis`）
- `from`: 反応前の化合物名
- `reagent`: 試薬または反応条件
- `to`: 反応後の化合物名
- `description`: 問題文（オプション、空の場合は自動生成）

## 高校化学で出題される主な化合物

詳細は `SPREADSHEET_TEMPLATE.md` を参照してください。

## トラブルシューティング

- CSVファイルが読み込まれない場合: ブラウザのコンソールでエラーを確認
- 構造式が表示されない場合: 化合物名が既存データと一致しているか確認
- 反応データが表示されない場合: `type`列が正しく設定されているか確認

